<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="robots" content="noindex">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Stick&display=swap" rel="stylesheet">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c&display=swap" rel="stylesheet">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Klee+One&display=swap" rel="stylesheet">
    <style>
        .canvas-space {
            position: fixed;
            bottom: 0;
        }

        #canvas {
            border: 1px solid #000000;
            background: rgba(255, 255, 232, 0.5);
            max-width: 100%;
            height: auto;
            max-height: 100%
        }

        button {
            font-size: 4vmax;
        }

        .title {
            font-family: 'Stick', sans-serif;
            font-size: 7vw;
            text-align: center;
        }

        .Japanese {
            height: 100vh;
            font-family: 'M PLUS Rounded 1c', sans-serif;
            font-size: 6vw;
            text-align: center;
        }

        .Kanji {
            height: 50vw;
            font-family: 'Klee One', cursive;
            font-size: 15vw;
            text-align: center;
        }
    </style>
</head>

<body>
    <p class="title">漢検ステップ<br>⑬-⑮</p>
    <div class="canvas-space">
        <canvas id="canvas" height="300"></canvas>
        <button type="button" onclick="clearCanvas()">×</button>
        <button type="button" onclick="prevCanvas()">←</button>
        <button type="button" onclick="nextCanvas()">→</button>
    </div>
    <div id="rnj"></div>
    <div class="Japanese"><u>アコガ</u>れる</div>
    <div class="Kanji">憧</div>
    <div class="Japanese">顔に<u>ガンシュウ</u>の色を浮かべる</div>
    <div class="Kanji">含羞</div>
    <div class="Japanese"><U>ソデ</U>を通す</div>
    <div class="Kanji">袖</div>
    <div class="Japanese">石を<u>ケ</u>って遊ぶ</div>
    <div class="Kanji">蹴</div>
    <div class="Japanese">旧習の<u>ジュバク</u></div>
    <div class="Kanji">呪縛</div>
    <div class="Japanese">机を<u>フ</u>く</div>
    <div class="Kanji">拭</div>
    <div class="Japanese">他人の<u>シリウマ</u>に乗って騒ぐ</div>
    <div class="Kanji">尻馬</div>
    <div class="Japanese">会社の将来を<u>ソウケン</u>に担う</div>
    <div class="Kanji">双肩</div>
    <div class="Japanese">党内の<u>ハバツ</u>争い</div>
    <div class="Kanji">派閥</div>
    <div class="Japanese">思い出を<u>タグ</u>る</div>
    <div class="Kanji">手繰</div>
    <div class="Japanese">誠に<u>コウジン</u>の至りです</div>
    <div class="Kanji">幸甚</div>
    <div class="Japanese">心得違いを<u>サト</u>した</div>
    <div class="Kanji">諭</div>
    <div class="Japanese"><u>ハケン</u>を握る</div>
    <div class="Kanji">覇権</div>
    <div class="Japanese">この和歌は<u>ヨ</u>み人知らずだ</div>
    <div class="Kanji">詠</div>
    <div class="Japanese"><u>アイビョウ</u>の写真を持ち歩く</div>
    <div class="Kanji">愛猫</div>
    <div class="Japanese"><u>ヒンパン</u>に連絡が来る</div>
    <div class="Kanji">頻繁</div>
    <div class="Japanese">赤飯を<u>タ</u>く</div>
    <div class="Kanji">炊</div>
    <div class="Japanese"><u>シカ</u>を指して馬となす</div>
    <div class="Kanji">鹿</div>
    <div class="Japanese">多くの子会社を<u>サンカ</u>に持つ</div>
    <div class="Kanji">傘下</div>
    <div class="Japanese">災害の<u>サンカ</u>から守る</div>
    <div class="Kanji">惨禍</div>
    <div class="Japanese"><u>シャオン</u>セールを催す</div>
    <div class="Kanji">謝恩</div>
    <div class="Japanese"><u>シャオン</u>壁を設ける</div>
    <div class="Kanji">遮音</div>
    <div class="Japanese">目の<u>ツ</u>んだ布地</div>
    <div class="Kanji">詰</div>
    <div class="Japanese">>トラブルの芽を<u>ツ</u>んでおく</div>
    <div class="Kanji">摘</div>

    <div class="Japanese"><u>ジンゾウ</u>を患う</div>
    <div class="Kanji">腎臓</div>
    <div class="Japanese"><u>セイサン</u>な戦い</div>
    <div class="Kanji">凄惨</div>
    <div class="Japanese">脳と<u>セキズイ</u>を中枢神経という</div>
    <div class="Kanji">脊髄</div>
    <div class="Japanese">ボールペンの替え<u>シン</u></div>
    <div class="Kanji">芯</div>
    <div class="Japanese">睡眠状態から<u>カクセイ</u>する</div>
    <div class="Kanji">覚醒</div>
    <div class="Japanese"><u>ヒッス</u>条件を挙げる</div>
    <div class="Kanji">必須</div>
    <div class="Japanese"><u>ヤマスソ</u>に紅葉が広がる</div>
    <div class="Kanji">山裾</div>
    <div class="Japanese">岩を<u>フンサイ</u>する</div>
    <div class="Kanji">粉砕</div>
    <div class="Japanese"><u>マッチャ</u>をいただく</div>
    <div class="Kanji">抹茶</div>
    <div class="Japanese"><u>イオウ</u>の臭いが漂う</div>
    <div class="Kanji">硫黄</div>
    <div class="Japanese">賛否が<u>ハクチュウ</u>している</div>
    <div class="Kanji">伯仲</div>
    <div class="Japanese">物語が<u>カキョウ</u>に入る</div>
    <div class="Kanji">佳境</div>
    <div class="Japanese">大河の流れを<u>ナガ</u>める</div>
    <div class="Kanji">眺</div>
    <div class="Japanese"><u>ホウビ</u>を与える</div>
    <div class="Kanji">褒美</div>
    <div class="Japanese"><u>ゴウカ</u>な衣装</div>
    <div class="Kanji">豪華</div>
    <div class="Japanese">雪で<u>コオ</u>った道</div>
    <div class="Kanji">凍</div>
    <div class="Japanese">寺院が<u>コンリュウ</u>される</div>
    <div class="Kanji">建立</div>
    <div class="Japanese"><u>ナマ</u>け者</div>
    <div class="Kanji">怠</div>
    <div class="Japanese">家族写真を<u>ト</u>る</div>
    <div class="Kanji">撮</div>
    <div class="Japanese">決を<u>ト</u>る</div>
    <div class="Kanji">採</div>
    <div class="Japanese"><u>ドウヨウ</u>する</div>
    <div class="Kanji">動揺</div>
    <div class="Japanese"><u>ドウヨウ</u>を口ずさむ</div>
    <div class="Kanji">童謡</div>
    <div class="Japanese">うわさの<u>シンギ</u>を確かめる</div>
    <div class="Kanji">真偽</div>
    <div class="Japanese">法案を<u>シンギ</u>する</div>
    <div class="Kanji">審議</div>

    <div class="Japanese">節分に<u>イ</u>り豆をまく</div>
    <div class="Kanji">煎</div>
    <div class="Japanese">彼の才能が<u>ウラヤ</u>ましい</div>
    <div class="Kanji"><u>羨</div>
    <div class="Japanese">シンセキ</u>の家に遊びに行く</div>
    <div class="Kanji">親戚</div>
    <div class="Japanese">海の幸が<u>ショクゼン</u>をにぎわす</div>
    <div class="Kanji">食膳</div>
    <div class="Japanese"><u>ビンセン</u>で手紙を書く</div>
    <div class="Kanji">便箋</div>
    <div class="Japanese"><u>ショセン</u>子供のいたずらだ</div>
    <div class="Kanji">所詮</div>
    <div class="Japanese"><u>ルイセン</u>が緩む</div>
    <div class="Kanji">涙腺</div>
    <div class="Japanese">近代医学の<u>イシズエ</u>を築く</div>
    <div class="Kanji">礎</div>
    <div class="Japanese"><u>イン</u>を踏んだ詩</div>
    <div class="Kanji">韻</div>
    <div class="Japanese">人事を<u>サッシン</u>する</div>
    <div class="Kanji">刷新</div>
    <div class="Japanese">コレラの<u>ボウエキ</u>対策</div>
    <div class="Kanji">防疫</div>
    <div class="Japanese">国を<u>ス</u>べる王</div>
    <div class="Kanji">統</div>
    <div class="Japanese">外国との<u>シャッカン</u>が成立した</div>
    <div class="Kanji">借款</div>
    <div class="Japanese">雪が一面を<u>オオ</u>い隠した</div>
    <div class="Kanji">覆</div>
    <div class="Japanese">入金と出金とを<u>ソウサイ</u>する</div>
    <div class="Kanji">相殺</div>
    <div class="Japanese"><u>ソウレツ</u>な戦い</div>
    <div class="Kanji">壮烈</div>
    <div class="Japanese">生活用品を小売店に<u>オロ</u>す</div>
    <div class="Kanji">卸</div>
    <div class="Japanese"><u>ニ</u>え湯を飲まされる</div>
    <div class="Kanji">煮</div>
    <div class="Japanese">事故の損害を<u>ホショウ</u>する</div>
    <div class="Kanji">補償</div>
    <div class="Japanese">社会<u>ホショウ</u>制度</div>
    <div class="Kanji">保障</div>
    <div class="Japanese">古代文明<u>ハッショウ</u>の地</div>
    <div class="Kanji">発祥</div>
    <div class="Japanese">結核を<u>ハッショウ</u>する</div>
    <div class="Kanji">発症</div>
    <div class="Japanese">業者と価格の<u>コウショウ</u>をする</div>
    <div class="Kanji">交渉</div>
    <div class="Japanese"><u>コウショウ</u>な趣味を持つ</div>
    <div class="Kanji">高尚</div>

    <script>
        var canvas = document.getElementById('canvas'),
            ctx = canvas.getContext('2d'),
            moveflg = 0,
            Xpoint,
            Ypoint;

        canvas.width = document.documentElement.clientWidth - 20;

        //初期値（サイズ、色、アルファ値）の決定
        var defSize = 5,
            defColor = "#555";

        // キャンバスを白色に塗る
        ctx.fillStyle = 'rgb(255,255,255)';

        // ストレージの初期化
        var myStorage = localStorage;
        window.onload = initLocalStorage();

        // PC対応
        canvas.addEventListener('mousedown', startPoint, false);
        canvas.addEventListener('mousemove', movePoint, false);
        canvas.addEventListener('mouseup', endPoint, false);
        // スマホ対応
        canvas.addEventListener('touchstart', startPoint, false);
        canvas.addEventListener('touchmove', movePoint, false);
        canvas.addEventListener('touchend', endPoint, false);

        document.body.addEventListener("touchstart", function (e) {
            if (e.target == canvas) {
                e.preventDefault();
            }
        }, false);
        document.body.addEventListener("touchend", function (e) {
            if (e.target == canvas) {
                e.preventDefault();
            }
        }, false);
        document.body.addEventListener("touchmove", function (e) {
            if (e.target == canvas) {
                e.preventDefault();
            }
        }, false);

        function startPoint(e) {
            e.preventDefault();
            ctx.beginPath();

            Xpoint = e.layerX;
            Ypoint = e.layerY - window.scrollY;

            ctx.moveTo(Xpoint, Ypoint);
        }

        function movePoint(e) {
            e.preventDefault();
            if (e.buttons === 1 || e.witch === 1 || e.type == 'touchmove') {
                Xpoint = e.layerX;
                Ypoint = e.layerY - window.scrollY;
                moveflg = 1;

                ctx.lineTo(Xpoint, Ypoint);
                ctx.lineCap = "round";
                ctx.lineWidth = defSize * 2;
                ctx.strokeStyle = defColor;
                ctx.stroke();
            }
        }

        function endPoint(e) {
            e.preventDefault();
            if (moveflg === 0) {
                ctx.lineTo(Xpoint - 1, Ypoint - 1);
                ctx.lineCap = "round";
                ctx.lineWidth = defSize * 2;
                ctx.strokeStyle = defColor;
                ctx.stroke();

            }
            moveflg = 0;
            setLocalStoreage();
        }

        function clearCanvas() {
            initLocalStorage();
            temp = [];
            resetCanvas();
        }

        function resetCanvas() {
            ctx.clearRect(0, 0, ctx.canvas.clientWidth, ctx.canvas.clientHeight);
            ctx.fillStyle = 'rgb(255,255,255)';
        }

        function chgImg() {
            var png = canvas.toDataURL();
            document.getElementById("newImg").src = png;
        }

        function initLocalStorage() {
            myStorage.setItem("__log", JSON.stringify([]));
        }
        function setLocalStoreage() {
            var png = canvas.toDataURL();
            var logs = JSON.parse(myStorage.getItem("__log"));

            setTimeout(function () {
                logs.unshift({ png: png });
                myStorage.setItem("__log", JSON.stringify(logs));
                temp = [];
            }, 0);
        }

        function prevCanvas() {
            var logs = JSON.parse(myStorage.getItem("__log"));

            if (logs.length > 0) {
                temp.unshift(logs.shift());

                setTimeout(function () {
                    myStorage.setItem("__log", JSON.stringify(logs));
                    resetCanvas();
                    draw(logs[0]['png']);
                }, 0);
            }
        }

        function nextCanvas() {
            var logs = JSON.parse(myStorage.getItem("__log"));

            if (temp.length > 0) {
                logs.unshift(temp.shift());

                setTimeout(function () {
                    myStorage.setItem("__log", JSON.stringify(logs));
                    resetCanvas();
                    draw(logs[0]['png']);
                }, 0);
            }
        }

        function draw(src) {
            var img = new Image();
            img.src = src;

            img.onload = function () {
                ctx.drawImage(img, 0, 0);
            }
        }
    </script>
</body>

</html>
